var CodeMirror=exports.CodeMirror=function(){function e(n,r){function It(e){return e>=0&&e<ht.size}function Rt(e){return b(ht,e)}function Ut(e,t){kt=!0;var n=t-e.height;for(var r=e;r;r=r.parent)r.height+=n}function zt(e){var t={line:0,ch:0};nn(t,{line:ht.size-1,ch:Rt(ht.size-1).text.length},Q(e),t,t),Et=!0}function Wt(e){var t=[];return ht.iter(0,ht.size,function(e){t.push(e.text)}),t.join("\n")}function Xt(e){function f(e){var t=Sr(e,!0);if(t&&!U(t,o)){dt||en(),o=t,On(r,t),Et=!1;var n=xn();if(t.line>=n.to||t.line<n.from)u=setTimeout(Hr(function(){f(e)}),150)}}An(e.shiftKey);for(var n=A(e);n!=k;n=n.parentNode)if(n.parentNode==Z&&n!=et)return;for(var n=A(e);n!=k;n=n.parentNode)if(n.parentNode==nt)return i.onGutterClick&&i.onGutterClick(qt,J(nt.childNodes,n)+Ot,e),C(e);var r=Sr(e);switch(O(e)){case 3:P&&!t&&xr(e);return;case 2:r&&Dn(r.line,r.ch,!0);return}if(!r){A(e)==I&&C(e);return}dt||en();var s=+(new Date);if(yt&&yt.time>s-400&&U(yt.pos,r))return C(e),setTimeout(bn,20),Un(r.line);if(gt&&gt.time>s-400&&U(gt.pos,r))return yt={time:s,pos:r},C(e),Rn(r);gt={time:s,pos:r};var o=r,u;if(D&&!U(vt.from,vt.to)&&!z(r,vt.from)&&!z(vt.to,r)){B&&(rt.draggable=!0);var a=M(T,"mouseup",Hr(function(t){B&&(rt.draggable=!1),bt=!1,a(),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&(C(t),Dn(r.line,r.ch,!0),bn())}),!0);bt=!0;return}C(e),Dn(r.line,r.ch,!0);var l=M(T,"mousemove",Hr(function(e){clearTimeout(u),C(e),f(e)}),!0),a=M(T,"mouseup",Hr(function(e){clearTimeout(u);var t=Sr(e);t&&On(r,t),C(e),bn(),Et=!0,l(),a()}),!0)}function Vt(e){for(var t=A(e);t!=k;t=t.parentNode)if(t.parentNode==nt)return C(e);var n=Sr(e);if(!n)return;yt={time:+(new Date),pos:n},C(e),Rn(n)}function $t(e){e.preventDefault();var t=Sr(e,!0),n=e.dataTransfer.files;if(!t||i.readOnly)return;if(n&&n.length&&window.FileReader&&window.File){function r(e,n){var r=new FileReader;r.onload=function(){o[n]=r.result,++u==s&&(t=Hn(t),Hr(function(){var e=an(o.join(""),t,t);On(t,e)})())},r.readAsText(e)}var s=n.length,o=Array(s),u=0;for(var a=0;a<s;++a)r(n[a],a)}else try{var o=e.dataTransfer.getData("Text");if(o){var f=an(o,t,t),l=vt.from,c=vt.to;On(t,f),bt&&an("",l,c),bn()}}catch(e){}}function Jt(e){var t=hn();V(t),e.dataTransfer.setDragImage(X,0,0),e.dataTransfer.setData("Text",t)}function Kt(e){var t=Y[e.keyCode],n=u[i.keyMap].auto,r,s;if(t==null||e.altGraphKey)return n&&(i.keyMap=n),null;e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Cmd-"+t),e.shiftKey&&(r=a("Shift-"+t,i.extraKeys,i.keyMap))?s=!0:r=a(t,i.extraKeys,i.keyMap),typeof r=="string"&&(o.propertyIsEnumerable(r)?r=o[r]:r=null),n&&(r||!f(e))&&(i.keyMap=n);if(!r)return!1;if(s){var l=mt;mt=null,r(qt),mt=l}else r(qt);return C(e),!0}function Gt(e){dt||en();var n=e.keyCode;H&&n==27&&(e.returnValue=!1),An(n==16||e.shiftKey);if(i.onKeyEvent&&i.onKeyEvent(qt,N(e)))return;var r=Kt(e);window.opera&&(Qt=r?e.keyCode:null,!r&&(t?e.metaKey:e.ctrlKey)&&e.keyCode==88&&fn(""))}function Yt(e){if(window.opera&&e.keyCode==Qt){Qt=null,C(e);return}if(i.onKeyEvent&&i.onKeyEvent(qt,N(e)))return;if(window.opera&&!e.which&&Kt(e))return;if(i.electricChars&&ct.electricChars){var t=String.fromCharCode(e.charCode==null?e.keyCode:e.charCode);ct.electricChars.indexOf(t)>-1&&setTimeout(Hr(function(){Wn(vt.to.line,"smart")}),75)}vn()}function Zt(e){if(i.onKeyEvent&&i.onKeyEvent(qt,N(e)))return;e.keyCode==16&&(mt=null)}function en(){if(i.readOnly)return;dt||(i.onFocus&&i.onFocus(qt),dt=!0,k.className.search(/\bCodeMirror-focused\b/)==-1&&(k.className+=" CodeMirror-focused"),Ct||yn(!0)),dn(),Tr()}function tn(){dt&&(i.onBlur&&i.onBlur(qt),dt=!1,k.className=k.className.replace(" CodeMirror-focused","")),clearInterval(lt),setTimeout(function(){dt||(mt=null)},150)}function nn(e,t,n,r,s){if(jt){var o=[];ht.iter(e.line,t.line+1,function(e){o.push(e.text)}),jt.addChange(e.line,n.length,o);while(jt.done.length>i.undoDepth)jt.done.shift()}un(e,t,n,r,s)}function rn(e,t){var n=e.pop();if(n){var r=[],i=n.start+n.added;ht.iter(n.start,i,function(e){r.push(e.text)}),t.push({start:n.start,added:n.old.length,old:r});var s=Hn({line:n.start+n.old.length-1,ch:$(r[r.length-1],n.old[n.old.length-1])});un({line:n.start,ch:0},{line:i-1,ch:Rt(i-1).text.length},n.old,s,s),Et=!0}}function sn(){rn(jt.done,jt.undone)}function on(){rn(jt.undone,jt.done)}function un(e,t,n,r,s){function T(e){return e<=Math.min(t.line,t.line+y)?e:e+y}var o=!1,u=Pt.length;i.lineWrapping||ht.iter(e.line,t.line,function(e){if(e.text.length==u)return o=!0,!0});if(e.line!=t.line||n.length>1)kt=!0;var a=t.line-e.line,f=Rt(e.line),l=Rt(t.line);if(e.ch==0&&t.ch==0&&n[n.length-1]==""){var c=[],h=null;e.line?(h=Rt(e.line-1),h.fixMarkEnds(l)):l.fixMarkStarts();for(var p=0,d=n.length-1;p<d;++p)c.push(v.inheritMarks(n[p],h));a&&ht.remove(e.line,a,Lt),c.length&&ht.insert(e.line,c)}else if(f==l)if(n.length==1)f.replace(e.ch,t.ch,n[0]);else{l=f.split(t.ch,n[n.length-1]),f.replace(e.ch,null,n[0]),f.fixMarkEnds(l);var c=[];for(var p=1,d=n.length-1;p<d;++p)c.push(v.inheritMarks(n[p],f));c.push(l),ht.insert(e.line+1,c)}else if(n.length==1)f.replace(e.ch,null,n[0]),l.replace(null,t.ch,""),f.append(l),ht.remove(e.line+1,a,Lt);else{var c=[];f.replace(e.ch,null,n[0]),l.replace(null,t.ch,n[n.length-1]),f.fixMarkEnds(l);for(var p=1,d=n.length-1;p<d;++p)c.push(v.inheritMarks(n[p],f));a>1&&ht.remove(e.line+1,a-1,Lt),ht.insert(e.line+1,c)}if(i.lineWrapping){var m=I.clientWidth/br()-3;ht.iter(e.line,e.line+n.length,function(e){if(e.hidden)return;var t=Math.ceil(e.text.length/m)||1;t!=e.height&&Ut(e,t)})}else ht.iter(e.line,p+n.length,function(e){var t=e.text;t.length>u&&(Pt=t,u=t.length,Ht=null,o=!1)}),o&&(u=0,Pt="",Ht=null,ht.iter(0,ht.size,function(e){var t=e.text;t.length>u&&(u=t.length,Pt=t)}));var g=[],y=n.length-a-1;for(var p=0,b=pt.length;p<b;++p){var w=pt[p];w<e.line?g.push(w):w>t.line&&g.push(w+y)}var E=e.line+Math.min(n.length,500);Ar(e.line,E),g.push(E),pt=g,Mr(100),xt.push({from:e.line,to:t.line+1,diff:y});var S={from:e,to:t,text:n};if(Tt){for(var x=Tt;x.next;x=x.next);x.next=S}else Tt=S;Mn(r,s,T(vt.from.line),T(vt.to.line)),Z.style.height=ht.height*mr()+2*wr()+"px"}function an(e,t,n){function r(r){if(z(r,t))return r;if(!z(n,r))return i;var s=r.line+e.length-(n.line-t.line)-1,o=r.ch;return r.line==n.line&&(o+=e[e.length-1].length-(n.ch-(n.line==t.line?t.ch:0))),{line:s,ch:o}}t=Hn(t),n?n=Hn(n):n=t,e=Q(e);var i;return ln(e,t,n,function(e){return i=e,{from:r(vt.from),to:r(vt.to)}}),i}function fn(e,t){ln(Q(e),vt.from,vt.to,function(e){return t=="end"?{from:e,to:e}:t=="start"?{from:vt.from,to:vt.from}:{from:vt.from,to:e}})}function ln(e,t,n,r){var i=e.length==1?e[0].length+t.ch:e[e.length-1].length,s=r({line:t.line+e.length-1,ch:i});nn(t,n,e,s.from,s.to)}function cn(e,t){var n=e.line,r=t.line;if(n==r)return Rt(n).text.slice(e.ch,t.ch);var i=[Rt(n).text.slice(e.ch)];return ht.iter(n+1,r,function(e){i.push(e.text)}),i.push(Rt(r).text.slice(0,t.ch)),i.join("\n")}function hn(){return cn(vt.from,vt.to)}function dn(){if(pn)return;at.set(i.pollInterval,function(){_r(),gn(),dt&&dn(),Dr()})}function vn(){function t(){_r();var n=gn();!n&&!e?(e=!0,at.set(60,t)):(pn=!1,dn()),Dr()}var e=!1;pn=!0,at.set(20,t)}function gn(){if(Ct||!dt||G(F))return!1;var e=F.value;if(e==mn)return!1;mt=null;var t=0,n=Math.min(mn.length,e.length);while(t<n&&mn[t]==e[t])++t;return t<mn.length?vt.from={line:vt.from.line,ch:vt.from.ch-(mn.length-t)}:wt&&U(vt.from,vt.to)&&(vt.to={line:vt.to.line,ch:Math.min(Rt(vt.to.line).text.length,vt.to.ch+(e.length-t))}),fn(e.slice(t),"end"),mn=e,!0}function yn(e){U(vt.from,vt.to)?e&&(mn=F.value=""):(mn="",F.value=hn(),F.select())}function bn(){i.readOnly||F.focus()}function wn(){if(!st.getBoundingClientRect)return;var e=st.getBoundingClientRect();if(H&&e.top==e.bottom)return;var t=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(e.top<0||e.bottom>t)&&st.scrollIntoView()}function En(){var e=lr(vt.inverted?vt.from:vt.to),t=i.lineWrapping?Math.min(e.x,rt.offsetWidth):e.x;return Sn(t,e.y,t,e.yBot)}function Sn(e,t,n,r){var s=Er(),o=wr(),u=mr();t+=o,r+=o,e+=s,n+=s;var a=I.clientHeight,f=I.scrollTop,l=!1,c=!0;t<f?(I.scrollTop=Math.max(0,t-2*u),l=!0):r>f+a&&(I.scrollTop=r+u-a,l=!0);var h=I.clientWidth,p=I.scrollLeft,d=i.fixedGutter?tt.clientWidth:0;return e<p+d?(e<50&&(e=0),I.scrollLeft=Math.max(0,e-10-d),l=!0):n>h+p-3&&(I.scrollLeft=n+10-h,l=!0,n>Z.clientWidth&&(c=!1)),l&&i.onScroll&&i.onScroll(qt),c}function xn(){var e=mr(),t=I.scrollTop-wr(),n=Math.max(0,Math.floor(t/e)),r=Math.ceil((t+I.clientHeight)/e);return{from:E(ht,n),to:E(ht,r)}}function Tn(e,t){if(!I.clientWidth){Ot=Mt=At=0;return}var n=xn();if(e!==!0&&e.length==0&&n.from>=Ot&&n.to<=Mt)return;var r=Math.max(n.from-100,0),s=Math.min(ht.size,n.to+100);Ot<r&&r-Ot<20&&(r=Ot),Mt>s&&Mt-s<20&&(s=Math.min(ht.size,Mt));var o=e===!0?[]:Nn([{from:Ot,to:Mt,domStart:0}],e),u=0;for(var a=0;a<o.length;++a){var f=o[a];f.from<r&&(f.domStart+=r-f.from,f.from=r),f.to>s&&(f.to=s),f.from>=f.to?o.splice(a--,1):u+=f.to-f.from}if(u==s-r)return;o.sort(function(e,t){return e.domStart-t.domStart});var l=mr(),c=tt.style.display;ot.style.display=tt.style.display="none",Cn(r,s,o),ot.style.display="";var h=r!=Ot||s!=Mt||_t!=I.clientHeight+l;h&&(_t=I.clientHeight+l),Ot=r,Mt=s,At=S(ht,r),et.style.top=At*l+"px",Z.style.height=ht.height*l+2*wr()+"px";if(ot.childNodes.length!=Mt-Ot)throw new Error("BAD PATCH! "+JSON.stringify(o)+" size="+(Mt-Ot)+" nodes="+ot.childNodes.length);if(i.lineWrapping){Ht=I.clientWidth;var p=ot.firstChild;ht.iter(Ot,Mt,function(e){if(!e.hidden){var t=Math.round(p.offsetHeight/l)||1;e.height!=t&&(Ut(e,t),kt=!0)}p=p.nextSibling})}else Ht==null&&(Ht=or(Pt)),Ht>I.clientWidth?(rt.style.width=Ht+"px",Z.style.width="",Z.style.width=I.scrollWidth+"px"):rt.style.width=Z.style.width="";return tt.style.display=c,(h||kt)&&kn(),Ln(),!t&&i.onUpdate&&i.onUpdate(qt),!0}function Nn(e,t){for(var n=0,r=t.length||0;n<r;++n){var i=t[n],s=[],o=i.diff||0;for(var u=0,a=e.length;u<a;++u){var f=e[u];i.to<=f.from&&i.diff?s.push({from:f.from+o,to:f.to+o,domStart:f.domStart}):i.to<=f.from||i.from>=f.to?s.push(f):(i.from>f.from&&s.push({from:f.from,to:i.from,domStart:f.domStart}),i.to<f.to&&s.push({from:i.to+o,to:f.to+o,domStart:f.domStart+(i.to-f.from)}))}e=s}return e}function Cn(e,t,n){if(!n.length)ot.innerHTML="";else{function r(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var i=0,s=ot.firstChild,o;for(var u=0;u<n.length;++u){var a=n[u];while(a.domStart>i)s=r(s),i++;for(var f=0,l=a.to-a.from;f<l;++f)s=s.nextSibling,i++}while(s)s=r(s)}var c=n.shift(),s=ot.firstChild,f=e,h=vt.from.line,p=vt.to.line,d=h<e&&p>=e,v=T.createElement("div"),m;ht.iter(e,t,function(e){var t=null,r=null;d?(t=0,p==f&&(d=!1,r=vt.to.ch)):h==f&&(p==f?(t=vt.from.ch,r=vt.to.ch):(d=!0,t=vt.from.ch)),c&&c.to==f&&(c=n.shift()),!c||c.from>f?(e.hidden?v.innerHTML="<pre></pre>":v.innerHTML=e.getHTML(t,r,!0,Bt),ot.insertBefore(v.firstChild,s)):s=s.nextSibling,++f})}function kn(){if(!i.gutter&&!i.lineNumbers)return;var e=et.offsetHeight,t=I.clientHeight;tt.style.height=(e-t<2?t:e)+"px";var n=[],r=Ot;ht.iter(Ot,Math.max(Mt,Ot+1),function(e){if(e.hidden)n.push("<pre></pre>");else{var t=e.gutterMarker,s=i.lineNumbers?r+i.firstLineNumber:null;t&&t.text?s=t.text.replace("%N%",s!=null?s:""):s==null&&(s="\u00a0"),n.push(t&&t.style?'<pre class="'+t.style+'">':"<pre>",s);for(var o=1;o<e.height;++o)n.push("<br/>&#160;");n.push("</pre>")}++r}),tt.style.display="none",nt.innerHTML=n.join("");var s=String(ht.size).length,o=nt.firstChild,u=R(o),a="";while(u.length+a.length<s)a+="\u00a0";a&&o.insertBefore(T.createTextNode(a),o.firstChild),tt.style.display="",rt.style.marginLeft=tt.offsetWidth+"px",kt=!1}function Ln(){var e=vt.inverted?vt.from:vt.to,t=mr(),n=lr(e,!0),r=q(k),s=q(ot);j.style.top=n.y+s.top-r.top+"px",j.style.left=n.x+s.left-r.left+"px",U(vt.from,vt.to)?(st.style.top=n.y+"px",st.style.left=(i.lineWrapping?Math.min(n.x,rt.offsetWidth):n.x)+"px",st.style.display=""):st.style.display="none"}function An(e){e?mt=mt||(vt.inverted?vt.to:vt.from):mt=null}function On(e,t){var n=mt&&Hn(mt);n&&(z(n,e)?e=n:z(t,n)&&(t=n)),Mn(e,t),St=!0}function Mn(e,t,n,r){In=null,n==null&&(n=vt.from.line,r=vt.to.line);if(U(vt.from,e)&&U(vt.to,t))return;if(z(t,e)){var i=t;t=e,e=i}e.line!=n&&(e=_n(e,n,vt.from.ch)),t.line!=r&&(t=_n(t,r,vt.to.ch)),U(e,t)?vt.inverted=!1:U(e,vt.to)?vt.inverted=!1:U(t,vt.from)&&(vt.inverted=!0),U(e,t)?U(vt.from,vt.to)||xt.push({from:n,to:r+1}):U(vt.from,vt.to)?xt.push({from:e.line,to:t.line+1}):(U(e,vt.from)||(e.line<n?xt.push({from:e.line,to:Math.min(t.line,n)+1}):xt.push({from:n,to:Math.min(r,e.line)+1})),U(t,vt.to)||(t.line<r?xt.push({from:Math.max(n,e.line),to:r+1}):xt.push({from:Math.max(e.line,r),to:t.line+1}))),vt.from=e,vt.to=t,Nt=!0}function _n(e,t,n){function r(t){var r=e.line+t,i=t==1?ht.size:-1;while(r!=i){var s=Rt(r);if(!s.hidden){var o=e.ch;if(o>n||o>s.text.length)o=s.text.length;return{line:r,ch:o}}r+=t}}var i=Rt(e.line);return i.hidden?e.line>=t?r(1)||r(-1):r(-1)||r(1):e}function Dn(e,t,n){var r=Hn({line:e,ch:t||0});(n?On:Mn)(r,r)}function Pn(e){return Math.max(0,Math.min(e,ht.size-1))}function Hn(e){if(e.line<0)return{line:0,ch:0};if(e.line>=ht.size)return{line:ht.size-1,ch:Rt(ht.size-1).text.length};var t=e.ch,n=Rt(e.line).text.length;return t==null||t>n?{line:e.line,ch:n}:t<0?{line:e.line,ch:0}:e}function Bn(e,t){function o(){for(var t=r+e,n=e<0?-1:ht.size;t!=n;t+=e){var i=Rt(t);if(!i.hidden)return r=t,s=i,!0}}function u(t){if(i==(e<0?0:s.text.length)){if(!!t||!o())return!1;i=e<0?s.text.length:0}else i+=e;return!0}var n=vt.inverted?vt.from:vt.to,r=n.line,i=n.ch,s=Rt(r);if(t=="char")u();else if(t=="column")u(!0);else if(t=="word"){var a=!1;for(;;){if(e<0&&!u())break;if(K(s.text.charAt(i)))a=!0;else if(a){e<0&&(e=1,u());break}if(e>0&&!u())break}}return{line:r,ch:i}}function jn(e,t){var n=e<0?vt.from:vt.to;if(mt||U(vt.from,vt.to))n=Bn(e,t);Dn(n.line,n.ch,!0)}function Fn(e,t){U(vt.from,vt.to)?e<0?an("",Bn(e,t),vt.to):an("",vt.from,Bn(e,t)):an("",vt.from,vt.to),St=!0}function qn(e,t){var n=0,r=lr(vt.inverted?vt.from:vt.to,!0);In!=null&&(r.x=In),t=="page"?n=I.clientHeight:t=="line"&&(n=mr());var i=cr(r.x,r.y+n*e+2);Dn(i.line,i.ch,!0),In=r.x}function Rn(e){var t=Rt(e.line).text,n=e.ch,r=e.ch;while(n>0&&K(t.charAt(n-1)))--n;while(r<t.length&&K(t.charAt(r)))++r;On({line:e.line,ch:n},{line:e.line,ch:r})}function Un(e){On({line:e,ch:0},{line:e,ch:Rt(e).text.length})}function zn(e){if(U(vt.from,vt.to))return Wn(vt.from.line,e);var t=vt.to.line-(vt.to.ch?0:1);for(var n=vt.from.line;n<=t;++n)Wn(n,e)}function Wn(e,t){t||(t="add");if(t=="smart")if(!ct.indent)t="prev";else var n=Lr(e);var r=Rt(e),s=r.indentation(i.tabSize),o=r.text.match(/^\s*/)[0],u;t=="prev"?e?u=Rt(e-1).indentation(i.tabSize):u=0:t=="smart"?u=ct.indent(n,r.text.slice(o.length),r.text):t=="add"?u=s+i.indentUnit:t=="subtract"&&(u=s-i.indentUnit),u=Math.max(0,u);var a=u-s;if(!a){if(vt.from.line!=e&&vt.to.line!=e)return;var f=o}else{var f="",l=0;if(i.indentWithTabs)for(var c=Math.floor(u/i.tabSize);c;--c)l+=i.tabSize,f+="	";while(l<u)++l,f+=" "}an(f,{line:e,ch:0},{line:e,ch:o.length})}function Xn(){ct=e.getMode(i,i.mode),ht.iter(0,ht.size,function(e){e.stateAfter=null}),pt=[0],Mr()}function Vn(){var e=i.gutter||i.lineNumbers;tt.style.display=e?"":"none",e?kt=!0:ot.parentNode.style.marginLeft=0}function $n(e,t){if(i.lineWrapping){k.className+=" CodeMirror-wrap";var n=I.clientWidth/br()-3;ht.iter(0,ht.size,function(e){if(e.hidden)return;var t=Math.ceil(e.text.length/n)||1;t!=1&&Ut(e,t)}),rt.style.width=Z.style.width=""}else k.className=k.className.replace(" CodeMirror-wrap",""),Ht=null,Pt="",ht.iter(0,ht.size,function(e){e.height!=1&&!e.hidden&&Ut(e,1),e.text.length>Pt.length&&(Pt=e.text)});xt.push({from:0,to:ht.size})}function Jn(){for(var e='<span class="cm-tab">',t=0;t<i.tabSize;++t)e+=" ";return e+"</span>"}function Kn(){Bt=Jn(),Tn(!0)}function Qn(){I.className=I.className.replace(/\s*cm-s-\w+/g,"")+i.theme.replace(/(^|\s)\s*/g," cm-s-")}function Gn(){this.set=[]}function Yn(e,t,n){function i(e,t,n,i){Rt(e).addMark(new p(t,n,i,r.set))}e=Hn(e),t=Hn(t);var r=new Gn;if(e.line==t.line)i(e.line,e.ch,t.ch,n);else{i(e.line,e.ch,null,n);for(var s=e.line+1,o=t.line;s<o;++s)i(s,null,null,n);i(t.line,null,t.ch,n)}return xt.push({from:e.line,to:t.line+1}),r}function Zn(e){e=Hn(e);var t=new d(e.ch);return Rt(e.line).addMark(t),t}function er(e,t,n){return typeof e=="number"&&(e=Rt(Pn(e))),e.gutterMarker={text:t,style:n},kt=!0,e}function tr(e){typeof e=="number"&&(e=Rt(Pn(e))),e.gutterMarker=null,kt=!0}function nr(e,t){var n=e,r=e;return typeof e=="number"?r=Rt(Pn(e)):n=w(e),n==null?null:t(r,n)?(xt.push({from:n,to:n+1}),r):null}function rr(e,t){return nr(e,function(e){if(e.className!=t)return e.className=t,!0})}function ir(e,t){return nr(e,function(e,n){if(e.hidden!=t)return e.hidden=t,Ut(e,t?0:1),t&&(vt.from.line==n||vt.to.line==n)&&Mn(_n(vt.from,vt.from.line,vt.from.ch),_n(vt.to,vt.to.line,vt.to.ch)),kt=!0})}function sr(e){if(typeof e=="number"){if(!It(e))return null;var t=e;e=Rt(e);if(!e)return null}else{var t=w(e);if(t==null)return null}var n=e.gutterMarker;return{line:t,handle:e,text:e.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:e.className}}function or(e){return it.innerHTML="<pre><span>x</span></pre>",it.firstChild.firstChild.firstChild.nodeValue=e,it.firstChild.firstChild.offsetWidth||10}function ur(e,t){function i(e){return it.innerHTML="<pre><span>"+n.getHTML(null,null,!1,Bt,e)+"</span></pre>",it.firstChild.firstChild.offsetWidth}if(t<=0)return 0;var n=Rt(e),r=n.text,s=0,o=0,u=r.length,a,f=Math.min(u,Math.ceil(t/br()));for(;;){var l=i(f);if(!(l<=t&&f<u)){a=l,u=f;break}f=Math.min(u,Math.ceil(f*1.2))}if(t>a)return u;f=Math.floor(u*.8),l=i(f),l<t&&(s=f,o=l);for(;;){if(u-s<=1)return a-t>t-o?s:u;var c=Math.ceil((s+u)/2),h=i(c);h>t?(u=c,a=h):(s=c,o=h)}}function fr(e,t){var n="";if(i.lineWrapping){var r=e.text.indexOf(" ",t+2);n=V(e.text.slice(t+1,r<0?e.text.length:r+(H?5:0)))}it.innerHTML="<pre>"+e.getHTML(null,null,!1,Bt,t)+'<span id="CodeMirror-temp-'+ar+'">'+V(e.text.charAt(t)||" ")+"</span>"+n+"</pre>";var s=document.getElementById("CodeMirror-temp-"+ar),o=s.offsetTop,u=s.offsetLeft;if(H&&t&&o==0&&u==0){var a=document.createElement("span");a.innerHTML="x",s.parentNode.insertBefore(a,s.nextSibling),o=a.offsetTop}return{top:o,left:u}}function lr(e,t){var n,r=mr(),s=r*(S(ht,e.line)-(t?At:0));if(e.ch==0)n=0;else{var o=fr(Rt(e.line),e.ch);n=o.left,i.lineWrapping&&(s+=Math.max(0,o.top))}return{x:n,y:s,yBot:s+r}}function cr(e,t){function c(e){var t=fr(u,e);if(f){var r=Math.round(t.top/n);return Math.max(0,t.left+(r-l)*I.clientWidth)}return t.left}t<0&&(t=0);var n=mr(),r=br(),s=At+Math.floor(t/n),o=E(ht,s);if(o>=ht.size)return{line:ht.size-1,ch:Rt(ht.size-1).text.length};var u=Rt(o),a=u.text,f=i.lineWrapping,l=f?s-S(ht,o):0;if(e<=0&&l==0)return{line:o,ch:0};var h=0,p=0,d=a.length,v,m=Math.min(d,Math.ceil((e+l*I.clientWidth*.9)/r));for(;;){var g=c(m);if(!(g<=e&&m<d)){v=g,d=m;break}m=Math.min(d,Math.ceil(m*1.2))}if(e>v)return{line:o,ch:d};m=Math.floor(d*.8),g=c(m),g<e&&(h=m,p=g);for(;;){if(d-h<=1)return{line:o,ch:v-e>e-p?h:d};var y=Math.ceil((h+d)/2),b=c(y);b>e?(d=y,v=b):(h=y,p=b)}}function hr(e){var t=lr(e,!0),n=q(rt);return{x:n.left+t.x,y:n.top+t.y,yBot:n.top+t.yBot}}function mr(){if(vr==null){vr="<pre>";for(var e=0;e<49;++e)vr+="x<br/>";vr+="x</pre>"}var t=ot.clientHeight;return t==dr?pr:(dr=t,it.innerHTML=vr,pr=it.firstChild.offsetHeight/50||1,it.innerHTML="",pr)}function br(){return I.clientWidth==yr?gr:(yr=I.clientWidth,gr=or("x"))}function wr(){return rt.offsetTop}function Er(){return rt.offsetLeft}function Sr(e,t){var n=q(I,!0),r,i;try{r=e.clientX,i=e.clientY}catch(e){return null}if(!t&&(r-n.left>I.clientWidth||i-n.top>I.clientHeight))return null;var s=q(rt,!0);return cr(r-s.left,i-s.top)}function xr(e){function i(){var e=Q(F.value).join("\n");e!=r&&Hr(fn)(e,"end"),j.style.position="relative",F.style.cssText=n,Ct=!1,yn(!0),dn()}var t=Sr(e);if(!t||window.opera)return;(U(vt.from,vt.to)||z(t,vt.from)||!z(t,vt.to))&&Hr(Dn)(t.line,t.ch);var n=F.style.cssText;j.style.position="absolute",F.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; "+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Ct=!0;var r=F.value=hn();bn(),F.select();if(P){L(e);var s=M(window,"mouseup",function(){s(),setTimeout(i,20)},!0)}else setTimeout(i,50)}function Tr(){clearInterval(lt);var e=!0;st.style.visibility="",lt=setInterval(function(){st.style.visibility=(e=!e)?"":"hidden"},650)}function Cr(e){function v(e,t,n){if(!e.text)return;var r=e.styles,i=o?0:e.text.length-1,s;for(var a=o?0:r.length-2,f=o?r.length:-2;a!=f;a+=2*u){var l=r[a];if(r[a+1]!=null&&r[a+1]!=h){i+=u*l.length;continue}for(var c=o?0:l.length-1,v=o?l.length:-1;c!=v;c+=u,i+=u)if(i>=t&&i<n&&d.test(s=l.charAt(c))){var m=Nr[s];if(m.charAt(1)==">"==o)p.push(s);else{if(p.pop()!=m.charAt(0))return{pos:i,match:!1};if(!p.length)return{pos:i,match:!0}}}}}var t=vt.inverted?vt.from:vt.to,n=Rt(t.line),r=t.ch-1,i=r>=0&&Nr[n.text.charAt(r)]||Nr[n.text.charAt(++r)];if(!i)return;var s=i.charAt(0),o=i.charAt(1)==">",u=o?1:-1,a=n.styles;for(var f=r+1,l=0,c=a.length;l<c;l+=2)if((f-=a[l].length)<=0){var h=a[l+1];break}var p=[n.text.charAt(r)],d=/[(){}[\]]/;for(var l=t.line,c=o?Math.min(l+100,ht.size):Math.max(-1,l-100);l!=c;l+=u){var n=Rt(l),m=l==t.line,g=v(n,m&&o?r+1:0,m&&!o?r:n.text.length);if(g)break}g||(g={pos:null,match:!1});var h=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",y=Yn({line:t.line,ch:r},{line:t.line,ch:r+1},h),b=g.pos!=null&&Yn({line:l,ch:g.pos},{line:l,ch:g.pos+1},h),w=Hr(function(){y.clear(),b&&b.clear()});e?setTimeout(w,800):Dt=w}function kr(e){var t,n;for(var r=e,s=e-40;r>s;--r){if(r==0)return 0;var o=Rt(r-1);if(o.stateAfter)return r;var u=o.indentation(i.tabSize);if(n==null||t>u)n=r-1,t=u}return n}function Lr(e){var t=kr(e),n=t&&Rt(t-1).stateAfter;return n?n=l(ct,n):n=c(ct),ht.iter(t,e,function(e){e.highlight(ct,n,i.tabSize),e.stateAfter=l(ct,n)}),t<e&&xt.push({from:t,to:e}),e<ht.size&&!Rt(e).stateAfter&&pt.push(e),n}function Ar(e,t){var n=Lr(e);ht.iter(e,t,function(e){e.highlight(ct,n,i.tabSize),e.stateAfter=l(ct,n)})}function Or(){var e=+(new Date)+i.workTime,t=pt.length;while(pt.length){if(!Rt(Ot).stateAfter)var n=Ot;else var n=pt.pop();if(n>=ht.size)continue;var r=kr(n),s=r&&Rt(r-1).stateAfter;s?s=l(ct,s):s=c(ct);var o=0,u=ct.compareStates,a=!1,f=r,h=!1;ht.iter(f,ht.size,function(t){var r=t.stateAfter;if(+(new Date)>e)return pt.push(f),Mr(i.workDelay),a&&xt.push({from:n,to:f+1}),h=!0;var c=t.highlight(ct,s,i.tabSize);c&&(a=!0),t.stateAfter=l(ct,s);if(u){if(r&&u(r,s))return!0}else if(c!==!1||!r)o=0;else if(++o>3&&(!ct.indent||ct.indent(r,"")==ct.indent(s,"")))return!0;++f});if(h)return;a&&xt.push({from:n,to:f+1})}t&&i.onHighlightComplete&&i.onHighlightComplete(qt)}function Mr(e){if(!pt.length)return;ft.set(e,Hr(Or))}function _r(){Et=St=Tt=null,xt=[],Nt=!1,Lt=[]}function Dr(){var e=!1,t;Nt&&(e=!En()),xt.length?t=Tn(xt,!0):(Nt&&Ln(),kt&&kn()),e&&En(),Nt&&(wn(),Tr()),dt&&!Ct&&(Et===!0||Et!==!1&&Nt)&&yn(St),Nt&&i.matchBrackets&&setTimeout(Hr(function(){Dt&&(Dt(),Dt=null),U(vt.from,vt.to)&&Cr(!1)}),20);var n=Tt,r=Lt;Nt&&i.onCursorActivity&&i.onCursorActivity(qt),n&&i.onChange&&qt&&i.onChange(qt,n);for(var s=0;s<r.length;++s)r[s](qt);t&&i.onUpdate&&i.onUpdate(qt)}function Hr(e){return function(){Pr++||_r();try{var t=e.apply(this,arguments)}finally{--Pr||Dr()}return t}}var i={},h=e.defaults;for(var m in h)h.hasOwnProperty(m)&&(i[m]=(r&&r.hasOwnProperty(m)?r:h)[m]);var T=i.document,k=T.createElement("div");k.className="CodeMirror"+(i.lineWrapping?" CodeMirror-wrap":""),k.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden"></div><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div></div>',n.appendChild?n.appendChild(k):n(k);var j=k.firstChild,F=j.firstChild,I=k.lastChild,Z=I.firstChild,et=Z.firstChild,tt=et.firstChild,nt=tt.firstChild,rt=tt.nextSibling.firstChild,it=rt.firstChild,st=it.nextSibling,ot=st.nextSibling;Qn(),/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent)&&(F.style.width="0px"),B||(rt.draggable=!0),i.tabindex!=null&&(F.tabIndex=i.tabindex),!i.gutter&&!i.lineNumbers&&(tt.style.display="none");try{or("x")}catch(ut){throw ut.message.match(/runtime/i)&&(ut=new Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),ut}var at=new _,ft=new _,lt,ct,ht=new y([new g([new v("")])]),pt,dt;Xn();var vt={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},mt,gt,yt,bt,wt=!1,Et,St,xt,Tt,Nt,Ct,kt,Lt,At=0,Ot=0,Mt=0,_t=0,Dt,Pt="",Ht,Bt=Jn();Hr(function(){zt(i.value||""),Et=!1})();var jt=new x;M(I,"mousedown",Hr(Xt)),M(I,"dblclick",Hr(Vt)),M(rt,"dragstart",Jt),M(rt,"selectstart",C),P||M(I,"contextmenu",xr),M(I,"scroll",function(){Tn([]),i.fixedGutter&&(tt.style.left=I.scrollLeft+"px"),i.onScroll&&i.onScroll(qt)}),M(window,"resize",function(){Tn(!0)}),M(F,"keyup",Hr(Zt)),M(F,"input",vn),M(F,"keydown",Hr(Gt)),M(F,"keypress",Hr(Yt)),M(F,"focus",en),M(F,"blur",tn),M(I,"dragenter",L),M(I,"dragover",L),M(I,"drop",Hr($t)),M(I,"paste",function(){bn(),vn()}),M(F,"paste",vn),M(F,"cut",Hr(function(){fn("")}));var Ft;try{Ft=T.activeElement==F}catch(ut){}Ft?setTimeout(en,20):tn();var qt=k.CodeMirror={getValue:Wt,setValue:Hr(zt),getSelection:hn,replaceSelection:Hr(fn),focus:function(){bn(),en(),vn()},setOption:function(e,t){var n=i[e];i[e]=t,e=="mode"||e=="indentUnit"?Xn():e=="readOnly"&&t?(tn(),F.blur()):e=="theme"?Qn():e=="lineWrapping"&&n!=t?Hr($n)():e=="tabSize"&&Hr(Kn)(),(e=="lineNumbers"||e=="gutter"||e=="firstLineNumber"||e=="theme")&&Hr(Vn)()},getOption:function(e){return i[e]},undo:Hr(sn),redo:Hr(on),indentLine:Hr(function(e,t){It(e)&&Wn(e,t==null?"smart":t?"add":"subtract")}),indentSelection:Hr(zn),historySize:function(){return{undo:jt.done.length,redo:jt.undone.length}},clearHistory:function(){jt=new x},matchBrackets:Hr(function(){Cr(!0)}),getTokenAt:Hr(function(e){return e=Hn(e),Rt(e.line).getTokenAt(ct,Lr(e.line),e.ch)}),getStateAfter:function(e){return e=Pn(e==null?ht.size-1:e),Lr(e+1)},cursorCoords:function(e){return e==null&&(e=vt.inverted),hr(e?vt.from:vt.to)},charCoords:function(e){return hr(Hn(e))},coordsChar:function(e){var t=q(rt);return cr(e.x-t.left,e.y-t.top)},markText:Hr(Yn),setBookmark:Zn,setMarker:Hr(er),clearMarker:Hr(tr),setLineClass:Hr(rr),hideLine:Hr(function(e){return ir(e,!0)}),showLine:Hr(function(e){return ir(e,!1)}),onDeleteLine:function(e,t){if(typeof e=="number"){if(!It(e))return null;e=Rt(e)}return(e.handlers||(e.handlers=[])).push(t),e},lineInfo:sr,addWidget:function(e,t,n,r,i){e=lr(Hn(e));var s=e.yBot,o=e.x;t.style.position="absolute",Z.appendChild(t);if(r=="over")s=e.y;else if(r=="near"){var u=Math.max(I.offsetHeight,ht.height*mr()),a=Math.max(Z.clientWidth,rt.clientWidth)-Er();e.yBot+t.offsetHeight>u&&e.y>t.offsetHeight&&(s=e.y-t.offsetHeight),o+t.offsetWidth>a&&(o=a-t.offsetWidth)}t.style.top=s+wr()+"px",t.style.left=t.style.right="",i=="right"?(o=Z.clientWidth-t.offsetWidth,t.style.right="0px"):(i=="left"?o=0:i=="middle"&&(o=(Z.clientWidth-t.offsetWidth)/2),t.style.left=o+Er()+"px"),n&&Sn(o,s,o+t.offsetWidth,s+t.offsetHeight)},lineCount:function(){return ht.size},clipPos:Hn,getCursor:function(e){return e==null&&(e=vt.inverted),W(e?vt.from:vt.to)},somethingSelected:function(){return!U(vt.from,vt.to)},setCursor:Hr(function(e,t,n){t==null&&typeof e.line=="number"?Dn(e.line,e.ch,n):Dn(e,t,n)}),setSelection:Hr(function(e,t,n){(n?On:Mn)(Hn(e),Hn(t||e))}),getLine:function(e){if(It(e))return Rt(e).text},getLineHandle:function(e){if(It(e))return Rt(e)},setLine:Hr(function(e,t){It(e)&&an(t,{line:e,ch:0},{line:e,ch:Rt(e).text.length})}),removeLine:Hr(function(e){It(e)&&an("",{line:e,ch:0},Hn({line:e+1,ch:0}))}),replaceRange:Hr(an),getRange:function(e,t){return cn(Hn(e),Hn(t))},execCommand:function(e){return o[e](qt)},moveH:Hr(jn),deleteH:Hr(Fn),moveV:Hr(qn),toggleOverwrite:function(){wt=!wt},posFromIndex:function(e){var t=0,n;return ht.iter(0,ht.size,function(r){var i=r.text.length+1;if(i>e)return n=e,!0;e-=i,++t}),Hn({line:t,ch:n})},indexFromPos:function(e){if(e.line<0||e.ch<0)return 0;var t=e.ch;return ht.iter(0,e.line,function(e){t+=e.text.length+1}),t},operation:function(e){return Hr(e)()},refresh:function(){Tn(!0)},getInputField:function(){return F},getWrapperElement:function(){return k},getScrollerElement:function(){return I},getGutterElement:function(){return tt}},Qt=null,pn=!1,mn="",In=null;Gn.prototype.clear=Hr(function(){var e=Infinity,t=-Infinity;for(var n=0,r=this.set.length;n<r;++n){var i=this.set[n],s=i.marked;if(!s||!i.parent)continue;var o=w(i);e=Math.min(e,o),t=Math.max(t,o);for(var u=0;u<s.length;++u)s[u].set==this.set&&s.splice(u--,1)}e!=Infinity&&xt.push({from:e,to:t+1})}),Gn.prototype.find=function(){var e,t;for(var n=0,r=this.set.length;n<r;++n){var i=this.set[n],s=i.marked;for(var o=0;o<s.length;++o){var u=s[o];if(u.set==this.set)if(u.from!=null||u.to!=null){var a=w(i);a!=null&&(u.from!=null&&(e={line:a,ch:u.from}),u.to!=null&&(t={line:a,ch:u.to}))}}}return{from:e,to:t}};var ar=Math.floor(Math.random()*16777215).toString(16),pr,dr,vr,gr,yr=0,Nr={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},Pr=0;for(var Br in s)s.propertyIsEnumerable(Br)&&!qt.propertyIsEnumerable(Br)&&(qt[Br]=s[Br]);return qt}function a(e,t,n){function r(e,t,n){var i=t[e];if(i!=null)return i;n==null&&(n=t.fallthrough);if(n==null)return t.catchall;if(typeof n=="string")return r(e,u[n]);for(var s=0,o=n.length;s<o;++s){i=r(e,u[n[s]]);if(i!=null)return i}return null}return t?r(e,t,n):r(e,u[n])}function f(e){var t=Y[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function l(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function c(e,t,n){return e.startState?e.startState(t,n):!0}function h(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function p(e,t,n,r){this.from=e,this.to=t,this.style=n,this.set=r}function d(e){this.from=e,this.to=e,this.line=null}function v(e,t){this.styles=t||[e,null],this.text=e,this.height=1,this.marked=this.gutterMarker=this.className=this.handlers=null,this.stateAfter=this.parent=this.hidden=null}function m(e,t,n,r){for(var i=0,s=0,o=0;s<t;i+=2){var u=n[i],a=s+u.length;o==0?(a>e&&r.push(u.slice(e-s,Math.min(u.length,t-s)),n[i+1]),a>=e&&(o=1)):o==1&&(a>t?r.push(u.slice(0,t-s),n[i+1]):r.push(u,n[i+1])),s=a}}function g(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,r=0;t<n;++t)e[t].parent=this,r+=e[t].height;this.height=r}function y(e){this.children=e;var t=0,n=0;for(var r=0,i=e.length;r<i;++r){var s=e[r];t+=s.chunkSize(),n+=s.height,s.parent=this}this.size=t,this.height=n,this.parent=null}function b(e,t){while(!e.lines)for(var n=0;;++n){var r=e.children[n],i=r.chunkSize();if(t<i){e=r;break}t-=i}return e.lines[t]}function w(e){if(e.parent==null)return null;var t=e.parent,n=J(t.lines,e);for(var r=t.parent;r;t=r,r=r.parent)for(var i=0,s=r.children.length;;++i){if(r.children[i]==t)break;n+=r.children[i].chunkSize()}return n}function E(e,t){var n=0;e:do{for(var r=0,i=e.children.length;r<i;++r){var s=e.children[r],o=s.height;if(t<o){e=s;continue e}t-=o,n+=s.chunkSize()}return n}while(!e.lines);for(var r=0,i=e.lines.length;r<i;++r){var u=e.lines[r],a=u.height;if(t<a)break;t-=a}return n+r}function S(e,t){var n=0;e:do{for(var r=0,i=e.children.length;r<i;++r){var s=e.children[r],o=s.chunkSize();if(t<o){e=s;continue e}t-=o,n+=s.height}return n}while(!e.lines);for(var r=0;r<t;++r)n+=e.lines[r].height;return n}function x(){this.time=0,this.done=[],this.undone=[]}function T(){L(this)}function N(e){return e.stop||(e.stop=T),e}function C(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function k(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function L(e){C(e),k(e)}function A(e){return e.target||e.srcElement}function O(e){if(e.which)return e.which;if(e.button&1)return 1;if(e.button&2)return 3;if(e.button&4)return 2}function M(e,t,n,r){if(typeof e.addEventListener=="function"){e.addEventListener(t,n,!1);if(r)return function(){e.removeEventListener(t,n,!1)}}else{var i=function(e){n(e||window.event)};e.attachEvent("on"+t,i);if(r)return function(){e.detachEvent("on"+t,i)}}}function _(){this.id=null}function F(e,t,n){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var r=0,i=0;r<t;++r)e.charAt(r)=="	"?i+=n-i%n:++i;return i}function I(e){return e.currentStyle?e.currentStyle:window.getComputedStyle(e,null)}function q(e,t){var n=e.ownerDocument.body,r=0,i=0,s=!1;for(var o=e;o;o=o.offsetParent){var u=o.offsetLeft,a=o.offsetTop;o==n?(r+=Math.abs(u),i+=Math.abs(a)):(r+=u,i+=a),t&&I(o).position=="fixed"&&(s=!0)}var f=t&&!s?null:n;for(var o=e.parentNode;o!=f;o=o.parentNode)o.scrollLeft!=null&&(r-=o.scrollLeft,i-=o.scrollTop);return{left:r,top:i}}function R(e){return e.textContent||e.innerText||e.nodeValue||""}function U(e,t){return e.line==t.line&&e.ch==t.ch}function z(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function W(e){return{line:e.line,ch:e.ch}}function V(e){return X.textContent=e,X.innerHTML}function $(e,t){if(!t)return e?e.length:0;if(!e)return t.length;for(var n=e.length,r=t.length;n>=0&&r>=0;--n,--r)if(e.charAt(n)!=t.charAt(r))break;return r+1}function J(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return n;return-1}function K(e){return/\w/.test(e)||e.toUpperCase()!=e.toLowerCase()}e.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,onKeyEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,document:window.document};var t=/Mac/.test(navigator.platform),n=/Win/.test(navigator.platform),r={},i={};e.defineMode=function(t,n){!e.defaults.mode&&t!="null"&&(e.defaults.mode=t),r[t]=n},e.defineMIME=function(e,t){i[e]=t},e.getMode=function(t,n){typeof n=="string"&&i.hasOwnProperty(n)&&(n=i[n]);if(typeof n=="string")var s=n,o={};else if(n!=null)var s=n.name,o=n;var u=r[s];return u?u(t,o||{}):(window.console&&console.warn("No mode "+s+" found, falling back to plain text."),e.getMode(t,"text/plain"))},e.listModes=function(){var e=[];for(var t in r)r.propertyIsEnumerable(t)&&e.push(t);return e},e.listMIMEs=function(){var e=[];for(var t in i)i.propertyIsEnumerable(t)&&e.push({mime:t,mode:i[t]});return e};var s=e.extensions={};e.defineExtension=function(e,t){s[e]=t};var o=e.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),r=!U(t,n);!r&&e.getLine(t.line).length==t.ch?e.replaceRange("",t,{line:t.line+1,ch:0}):e.replaceRange("",t,r?n:{line:t.line})},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t})},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.setCursor(0,0,!0)},goDocEnd:function(e){e.setSelection({line:e.lineCount()-1},null,!0)},goLineStart:function(e){e.setCursor(e.getCursor().line,0,!0)},goLineStartSmart:function(e){var t=e.getCursor(),n=e.getLine(t.line),r=Math.max(0,n.search(/\S/));e.setCursor(t.line,t.ch<=r&&t.ch?0:r,!0)},goLineEnd:function(e){e.setSelection({line:e.getCursor().line},null,!0)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharLeft:function(e){e.deleteH(-1,"char")},delCharRight:function(e){e.deleteH(1,"char")},delWordLeft:function(e){e.deleteH(-1,"word")},delWordRight:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){e.replaceSelection("\n","end"),e.indentLine(e.getCursor().line)},toggleOverwrite:function(e){e.toggleOverwrite()}},u=e.keyMap={};u.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"indentMore","Shift-Tab":"indentLess",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},u.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll",fallthrough:"basic"},u.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll",fallthrough:["basic","emacsy"]},u["default"]=t?u.macDefault:u.pcDefault,u.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.fromTextArea=function(t,n){function r(){t.value=u.getValue()}n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex);if(t.form){var i=M(t.form,"submit",r,!0);if(typeof t.form.submit=="function"){var s=t.form.submit;function o(){r(),t.form.submit=s,t.form.submit(),t.form.submit=o}t.form.submit=o}}t.style.display="none";var u=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return u.save=r,u.getTextArea=function(){return t},u.toTextArea=function(){r(),t.parentNode.removeChild(u.getWrapperElement()),t.style.display="",t.form&&(i(),typeof t.form.submit=="function"&&(t.form.submit=s))},u},e.copyState=l,e.startState=c,h.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if(typeof e=="string")var n=t==e;else var n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){var t=this.pos;while(this.eat(e));return this.pos>t},eatSpace:function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return F(this.string,this.start,this.tabSize)},indentation:function(){return F(this.string,null,this.tabSize)},match:function(e,t,n){if(typeof e!="string"){var i=this.string.slice(this.pos).match(e);return i&&t!==!1&&(this.pos+=i[0].length),i}function r(e){return n?e.toLowerCase():e}if(r(this.string).indexOf(r(e),this.pos)==this.pos)return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=h,p.prototype={attach:function(e){this.set.push(e)},detach:function(e){var t=J(this.set,e);t>-1&&this.set.splice(t,1)},split:function(e,t){if(this.to<=e&&this.to!=null)return null;var n=this.from<e||this.from==null?null:this.from-e+t,r=this.to==null?null:this.to-e+t;return new p(n,r,this.style,this.set)},dup:function(){return new p(null,null,this.style,this.set)},clipTo:function(e,t,n,r,i){this.from!=null&&this.from>=t&&(this.from=Math.max(r,this.from)+i),this.to!=null&&this.to>t&&(this.to=r<this.to?this.to+i:t),e&&r>this.from&&(r<this.to||this.to==null)&&(this.from=null),n&&(t<this.to||this.to==null)&&(t>this.from||this.from==null)&&(this.to=null)},isDead:function(){return this.from!=null&&this.to!=null&&this.from>=this.to},sameSet:function(e){return this.set==e.set}},d.prototype={attach:function(e){this.line=e},detach:function(e){this.line==e&&(this.line=null)},split:function(e,t){if(e<this.from)return this.from=this.to=this.from-e+t,this},isDead:function(){return this.from>this.to},clipTo:function(e,t,n,r,i){(e||t<this.from)&&(n||r>this.to)?(this.from=0,this.to=-1):this.from>t&&(this.from=this.to=Math.max(r,this.from)+i)},sameSet:function(e){return!1},find:function(){return!this.line||!this.line.parent?null:{line:w(this.line),ch:this.from}},clear:function(){if(this.line){var e=J(this.line.marked,this);e!=-1&&this.line.marked.splice(e,1),this.line=null}}},v.inheritMarks=function(e,t){var n=new v(e),r=t&&t.marked;if(r)for(var i=0;i<r.length;++i)if(r[i].to==null&&r[i].style){var s=n.marked||(n.marked=[]),o=r[i],u=o.dup();s.push(u),u.attach(n)}return n},v.prototype={replace:function(e,t,n){var r=[],i=this.marked,s=t==null?this.text.length:t;m(0,e,this.styles,r),n&&r.push(n,null),m(s,this.text.length,this.styles,r),this.styles=r,this.text=this.text.slice(0,e)+n+this.text.slice(s),this.stateAfter=null;if(i){var o=n.length-(s-e);for(var u=0,a=i[u];u<i.length;++u)a.clipTo(e==null,e||0,t==null,s,o),a.isDead()&&(a.detach(this),i.splice(u--,1))}},split:function(e,t){var n=[t,null],r=this.marked;m(e,this.text.length,this.styles,n);var i=new v(t+this.text.slice(e),n);if(r)for(var s=0;s<r.length;++s){var o=r[s],u=o.split(e,t.length);u&&(i.marked||(i.marked=[]),i.marked.push(u),u.attach(i))}return i},append:function(e){var t=this.text.length,n=e.marked,r=this.marked;this.text+=e.text,m(0,e.text.length,e.styles,this.styles);if(r)for(var i=0;i<r.length;++i)r[i].to==null&&(r[i].to=t);if(n&&n.length){r||(this.marked=r=[]);e:for(var i=0;i<n.length;++i){var s=n[i];if(!s.from)for(var o=0;o<r.length;++o){var u=r[o];if(u.to==t&&u.sameSet(s)){u.to=s.to==null?null:s.to+t,u.isDead()&&(u.detach(this),n.splice(i--,1));continue e}}r.push(s),s.attach(this),s.from+=t,s.to!=null&&(s.to+=t)}}},fixMarkEnds:function(e){var t=this.marked,n=e.marked;if(!t)return;for(var r=0;r<t.length;++r){var i=t[r],s=i.to==null;if(s&&n)for(var o=0;o<n.length;++o)if(n[o].sameSet(i)){s=!1;break}s&&(i.to=this.text.length)}},fixMarkStarts:function(){var e=this.marked;if(!e)return;for(var t=0;t<e.length;++t)e[t].from==null&&(e[t].from=0)},addMark:function(e){e.attach(this),this.marked==null&&(this.marked=[]),this.marked.push(e),this.marked.sort(function(e,t){return(e.from||0)-(t.from||0)})},highlight:function(e,t,n){var r=new h(this.text,n),i=this.styles,s=0,o=!1,u=i[0],a;this.text==""&&e.blankLine&&e.blankLine(t);while(!r.eol()){var f=e.token(r,t),l=this.text.slice(r.start,r.pos);r.start=r.pos,s&&i[s-1]==f?i[s-2]+=l:l&&(!o&&(i[s+1]!=f||s&&i[s-2]!=a)&&(o=!0),i[s++]=l,i[s++]=f,a=u,u=i[s]);if(r.pos>5e3){i[s++]=this.text.slice(r.pos),i[s++]=null;break}}return i.length!=s&&(i.length=s,o=!0),s&&i[s-2]!=a&&(o=!0),o||(i.length<5&&this.text.length<10?null:!1)},getTokenAt:function(e,t,n){var r=this.text,i=new h(r);while(i.pos<n&&!i.eol()){i.start=i.pos;var s=e.token(i,t)}return{start:i.start,end:i.pos,string:i.current(),className:s||null,state:t}},indentation:function(e){return F(this.text,null,e)},getHTML:function(e,t,n,r,i){function u(e,t){if(!e)return;o&&H&&e.charAt(0)==" "&&(e="\u00a0"+e.slice(1)),o=!1,t?s.push('<span class="',t,'">',V(e).replace(/\t/g,r),"</span>"):s.push(V(e).replace(/\t/g,r))}var s=[],o=!0;n&&s.push(this.className?'<pre class="'+this.className+'">':"<pre>");var a=this.styles,f=this.text,l=this.marked;e==t&&(e=null);var c=f.length;i!=null&&(c=Math.min(i,c));if(!f&&i==null)u(" ",e!=null&&t==null?"CodeMirror-selected":null);else if(!l&&e==null)for(var h=0,p=0;p<c;h+=2){var d=a[h],v=a[h+1],m=d.length;p+m>c&&(d=d.slice(0,c-p)),p+=m,u(d,v&&"cm-"+v)}else{var g=0,h=0,y="",v,b=0,w=-1,E=null;function S(){l&&(w+=1,E=w<l.length?l[w]:null)}S();while(g<c){var x=c,T="";if(e!=null)if(e>g)x=e;else if(t==null||t>g)T=" CodeMirror-selected",t!=null&&(x=Math.min(x,t));while(E&&E.to!=null&&E.to<=g)S();E&&(E.from>g?x=Math.min(x,E.from):(T+=" "+E.style,E.to!=null&&(x=Math.min(x,E.to))));for(;;){var N=g+y.length,C=v;T&&(C=v?v+T:T),u(N>x?y.slice(0,x-g):y,C);if(N>=x){y=y.slice(x-g),g=x;break}g=N,y=a[h++],v="cm-"+a[h++]}}e!=null&&t==null&&u(" ","CodeMirror-selected")}return n&&s.push("</pre>"),s.join("")},cleanUp:function(){this.parent=null;if(this.marked)for(var e=0,t=this.marked.length;e<t;++e)this.marked[e].detach(this)}},g.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,n){for(var r=e,i=e+t;r<i;++r){var s=this.lines[r];this.height-=s.height,s.cleanUp();if(s.handlers)for(var o=0;o<s.handlers.length;++o)n.push(s.handlers[o])}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,n){this.height+=n,this.lines.splice.apply(this.lines,[e,0].concat(t));for(var r=0,i=t.length;r<i;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},y.prototype={chunkSize:function(){return this.size},remove:function(e,t,n){this.size-=t;for(var r=0;r<this.children.length;++r){var i=this.children[r],s=i.chunkSize();if(e<s){var o=Math.min(t,s-e),u=i.height;i.remove(e,o,n),this.height-=u-i.height,s==o&&(this.children.splice(r--,1),i.parent=null);if((t-=o)==0)break;e=0}else e-=s}if(this.size-t<25){var a=[];this.collapse(a),this.children=[new g(a)]}},collapse:function(e){for(var t=0,n=this.children.length;t<n;++t)this.children[t].collapse(e)},insert:function(e,t){var n=0;for(var r=0,i=t.length;r<i;++r)n+=t[r].height;this.insertHeight(e,t,n)},insertHeight:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<=o){s.insertHeight(e,t,n);if(s.lines&&s.lines.length>50){while(s.lines.length>50){var u=s.lines.splice(s.lines.length-25,25),a=new g(u);s.height-=a.height,this.children.splice(r+1,0,a),a.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(this.children.length<=10)return;var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new y(t);if(!e.parent){var r=new y(e.children);r.parent=e,e.children=[r,n],e=r}else{e.size-=n.size,e.height-=n.height;var i=J(e.parent.children,e);e.parent.children.splice(i+1,0,n)}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iter:function(e,t,n){this.iterN(e,t-e,n)},iterN:function(e,t,n){for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<o){var u=Math.min(t,o-e);if(s.iterN(e,u,n))return!0;if((t-=u)==0)break;e=0}else e-=o}}},x.prototype={addChange:function(e,t,n){this.undone.length=0;var r=+(new Date),i=this.done[this.done.length-1];if(r-this.time>400||!i||i.start>e+t||i.start+i.added<e-i.added+i.old.length)this.done.push({start:e,added:t,old:n});else{var s=0;if(e<i.start){for(var o=i.start-e-1;o>=0;--o)i.old.unshift(n[o]);i.added+=i.start-e,i.start=e}else i.start<e&&(s=e-i.start,t+=s);for(var o=i.added-s,u=n.length;o<u;++o)i.old.push(n[o]);i.added<t&&(i.added=t)}this.time=r}},e.e_stop=L,e.e_preventDefault=C,e.e_stopPropagation=k,e.connect=M,_.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}};var D=function(){if(/MSIE [1-8]\b/.test(navigator.userAgent))return!1;var e=document.createElement("div");return"draggable"in e}(),P=/gecko\/\d{7}/i.test(navigator.userAgent),H=/MSIE \d/.test(navigator.userAgent),B=/WebKit\//.test(navigator.userAgent),j="\n";(function(){var e=document.createElement("textarea");e.value="foo\nbar",e.value.indexOf("\r")>-1&&(j="\r\n")})(),document.documentElement.getBoundingClientRect!=null&&(q=function(e,t){try{var n=e.getBoundingClientRect();n={top:n.top,left:n.left}}catch(r){n={top:0,left:0}}if(!t)if(window.pageYOffset==null){var i=document.documentElement||document.body.parentNode;i.scrollTop==null&&(i=document.body),n.top+=i.scrollTop,n.left+=i.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n});var X=document.createElement("pre");V("a")=="\na"?V=function(e){return X.textContent=e,X.innerHTML.slice(1)}:V("	")!="	"&&(V=function(e){return X.innerHTML="",X.appendChild(document.createTextNode(e)),X.innerHTML}),e.htmlEscape=V;var Q="\n\nb".split(/\n/).length!=3?function(e){var t=0,n,r=[];while((n=e.indexOf("\n",t))>-1)r.push(e.slice(t,e.charAt(n-1)=="\r"?n-1:n)),t=n+1;return r.push(e.slice(t)),r}:function(e){return e.split(/\r?\n/)};e.splitLines=Q;var G=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0};e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Y={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return e.keyNames=Y,function(){for(var e=0;e<10;e++)Y[e+48]=String(e);for(var e=65;e<=90;e++)Y[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)Y[e+111]=Y[e+63235]="F"+e}(),e}();CodeMirror.defineMode("css",function(e){function r(e,t){return n=t,e}function i(e,t){var n=e.next();if(n=="@")return e.eatWhile(/[\w\\\-]/),r("meta",e.current());if(n=="/"&&e.eat("*"))return t.tokenize=s,s(e,t);if(n=="<"&&e.eat("!"))return t.tokenize=o,o(e,t);if(n!="=")return n!="~"&&n!="|"||!e.eat("=")?n=='"'||n=="'"?(t.tokenize=u(n),t.tokenize(e,t)):n=="#"?(e.eatWhile(/[\w\\\-]/),r("atom","hash")):n=="!"?(e.match(/^\s*\w*/),r("keyword","important")):/\d/.test(n)?(e.eatWhile(/[\w.%]/),r("number","unit")):/[,.+>*\/]/.test(n)?r(null,"select-op"):/[;{}:\[\]]/.test(n)?r(null,n):(e.eatWhile(/[\w\\\-]/),r("variable","variable")):r(null,"compare");r(null,"compare")}function s(e,t){var n=!1,s;while((s=e.next())!=null){if(n&&s=="/"){t.tokenize=i;break}n=s=="*"}return r("comment","comment")}function o(e,t){var n=0,s;while((s=e.next())!=null){if(n>=2&&s==">"){t.tokenize=i;break}n=s=="-"?n+1:0}return r("comment","comment")}function u(e){return function(t,n){var s=!1,o;while((o=t.next())!=null){if(o==e&&!s)break;s=!s&&o=="\\"}return s||(n.tokenize=i),r("string","string")}}var t=e.indentUnit,n;return{startState:function(e){return{tokenize:i,baseIndent:e||0,stack:[]}},token:function(e,t){if(e.eatSpace())return null;var r=t.tokenize(e,t),i=t.stack[t.stack.length-1];if(n=="hash"&&i=="rule")r="atom";else if(r=="variable")if(i=="rule")r="number";else if(!i||i=="@media{")r="tag";return i=="rule"&&/^[\{\};]$/.test(n)&&t.stack.pop(),n=="{"?i=="@media"?t.stack[t.stack.length-1]="@media{":t.stack.push("{"):n=="}"?t.stack.pop():n=="@media"?t.stack.push("@media"):i=="{"&&n!="comment"&&t.stack.push("rule"),r},indent:function(e,n){var r=e.stack.length;return/^\}/.test(n)&&(r-=e.stack[e.stack.length-1]=="rule"?2:1),e.baseIndent+r*t},electricChars:"}"}}),CodeMirror.defineMIME("text/css","css"),CodeMirror.defineMode("htmlmixed",function(e,t){function s(e,t){var s=n.token(e,t.htmlState);return s=="tag"&&e.current()==">"&&t.htmlState.context&&(/^script$/i.test(t.htmlState.context.tagName)?(t.token=u,t.localState=r.startState(n.indent(t.htmlState,"")),t.mode="javascript"):/^style$/i.test(t.htmlState.context.tagName)&&(t.token=a,t.localState=i.startState(n.indent(t.htmlState,"")),t.mode="css")),s}function o(e,t,n){var r=e.current(),i=r.search(t);return i>-1&&e.backUp(r.length-i),n}function u(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=s,t.curState=null,t.mode="html",s(e,t)):o(e,/<\/\s*script\s*>/,r.token(e,t.localState))}function a(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=s,t.localState=null,t.mode="html",s(e,t)):o(e,/<\/\s*style\s*>/,i.token(e,t.localState))}var n=CodeMirror.getMode(e,{name:"xml",htmlMode:!0}),r=CodeMirror.getMode(e,"javascript"),i=CodeMirror.getMode(e,"css");return{startState:function(){var e=n.startState();return{token:s,localState:null,mode:"html",htmlState:e}},copyState:function(e){if(e.localState)var t=CodeMirror.copyState(e.token==a?i:r,e.localState);return{token:e.token,localState:t,mode:e.mode,htmlState:CodeMirror.copyState(n,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,t){return e.token==s||/^\s*<\//.test(t)?n.indent(e.htmlState,t):e.token==u?r.indent(e.localState,t):i.indent(e.localState,t)},compareStates:function(e,t){return n.compareStates(e.htmlState,t.htmlState)},electricChars:"/{}:"}}),CodeMirror.defineMIME("text/html","htmlmixed"),CodeMirror.defineMode("javascript",function(e,t){function o(e,t,n){return t.tokenize=n,n(e,t)}function u(e,t){var n=!1,r;while((r=e.next())!=null){if(r==t&&!n)return!1;n=!n&&r=="\\"}return n}function l(e,t,n){return a=e,f=n,t}function c(e,t){var n=e.next();if(n=='"'||n=="'")return o(e,t,h(n));if(/[\[\]{}\(\),;\:\.]/.test(n))return l(n);if(n=="0"&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),l("number","number");if(/\d/.test(n))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),l("number","number");if(n=="/")return e.eat("*")?o(e,t,p):e.eat("/")?(e.skipToEnd(),l("comment","comment")):t.reAllowed?(u(e,"/"),e.eatWhile(/[gimy]/),l("regexp","string")):(e.eatWhile(s),l("operator",null,e.current()));if(n=="#")return e.skipToEnd(),l("error","error");if(s.test(n))return e.eatWhile(s),l("operator",null,e.current());e.eatWhile(/[\w\$_]/);var r=e.current(),a=i.propertyIsEnumerable(r)&&i[r];return a&&t.kwAllowed?l(a.type,a.style,r):l("variable","variable",r)}function h(e){return function(t,n){return u(t,e)||(n.tokenize=c),l("string","string")}}function p(e,t){var n=!1,r;while(r=e.next()){if(r=="/"&&n){t.tokenize=c;break}n=r=="*"}return l("comment","comment")}function v(e,t,n,r,i,s){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=s,r!=null&&(this.align=r)}function m(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function g(e,t,n,i,s){var o=e.cc;y.state=e,y.stream=s,y.marked=null,y.cc=o,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);for(;;){var u=o.length?o.pop():r?A:L;if(u(n,i)){while(o.length&&o[o.length-1].lex)o.pop()();return y.marked?y.marked:n=="variable"&&m(e,i)?"variable-2":t}}}function b(){for(var e=arguments.length-1;e>=0;e--)y.cc.push(arguments[e])}function w(){return b.apply(null,arguments),!0}function E(e){var t=y.state;if(t.context){y.marked="def";for(var n=t.localVars;n;n=n.next)if(n.name==e)return;t.localVars={name:e,next:t.localVars}}}function x(){y.state.context||(y.state.localVars=S),y.state.context={prev:y.state.context,vars:y.state.localVars}}function T(){y.state.localVars=y.state.context.vars,y.state.context=y.state.context.prev}function N(e,t){var n=function(){var n=y.state;n.lexical=new v(n.indented,y.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function C(){var e=y.state;e.lexical.prev&&(e.lexical.type==")"&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function k(e){return function(n){return n==e?w():e==";"?b():w(arguments.callee)}}function L(e){return e=="var"?w(N("vardef"),j,k(";"),C):e=="keyword a"?w(N("form"),A,L,C):e=="keyword b"?w(N("form"),L,C):e=="{"?w(N("}"),B,C):e==";"?w():e=="function"?w(z):e=="for"?w(N("form"),k("("),N(")"),I,k(")"),C,L,C):e=="variable"?w(N("stat"),_):e=="switch"?w(N("form"),A,N("}","switch"),k("{"),B,C,C):e=="case"?w(A,k(":")):e=="default"?w(k(":")):e=="catch"?w(N("form"),x,k("("),W,k(")"),L,C,T):b(N("stat"),A,k(";"),C)}function A(e){return d.hasOwnProperty(e)?w(M):e=="function"?w(z):e=="keyword c"?w(O):e=="("?w(N(")"),A,k(")"),C,M):e=="operator"?w(A):e=="["?w(N("]"),H(A,"]"),C,M):e=="{"?w(N("}"),H(P,"}"),C,M):w()}function O(e){return e.match(/[;\}\)\],]/)?b():b(A)}function M(e,t){if(e=="operator"&&/\+\+|--/.test(t))return w(M);if(e=="operator")return w(A);if(e==";")return;if(e=="(")return w(N(")"),H(A,")"),C,M);if(e==".")return w(D,M);if(e=="[")return w(N("]"),A,k("]"),C,M)}function _(e){return e==":"?w(C,L):b(M,k(";"),C)}function D(e){if(e=="variable")return y.marked="property",w()}function P(e){e=="variable"&&(y.marked="property");if(d.hasOwnProperty(e))return w(k(":"),A)}function H(e,t){function n(r){return r==","?w(e,n):r==t?w():w(k(t))}return function(i){return i==t?w():b(e,n)}}function B(e){return e=="}"?w():b(L,B)}function j(e,t){return e=="variable"?(E(t),w(F)):w()}function F(e,t){if(t=="=")return w(A,F);if(e==",")return w(j)}function I(e){return e=="var"?w(j,R):e==";"?b(R):e=="variable"?w(q):b(R)}function q(e,t){return t=="in"?w(A):w(M,R)}function R(e,t){return e==";"?w(U):t=="in"?w(A):w(A,k(";"),U)}function U(e){e!=")"&&w(A)}function z(e,t){if(e=="variable")return E(t),w(z);if(e=="(")return w(N(")"),x,H(W,")"),C,L,T)}function W(e,t){if(e=="variable")return E(t),w()}var n=e.indentUnit,r=t.json,i=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("operator"),s={type:"atom",style:"atom"};return{"if":t,"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":i,"typeof":i,"instanceof":i,"true":s,"false":s,"null":s,"undefined":s,NaN:s,Infinity:s}}(),s=/[+\-*&%=<>!?|]/,a,f,d={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},y={state:null,column:null,marked:null,cc:null},S={name:"this",next:{name:"arguments"}};return C.lex=!0,{startState:function(e){return{tokenize:c,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new v((e||0)-n,0,"block",!1),localVars:null,context:null,indented:0}},token:function(e,t){e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation());if(e.eatSpace())return null;var n=t.tokenize(e,t);return a=="comment"?n:(t.reAllowed=a=="operator"||a=="keyword c"||a.match(/^[\[{}\(,;:]$/),t.kwAllowed=a!=".",g(t,n,a,f,e))},indent:function(e,t){if(e.tokenize!=c)return 0;var r=t&&t.charAt(0),i=e.lexical,s=i.type,o=r==s;return s=="vardef"?i.indented+4:s=="form"&&r=="{"?i.indented:s=="stat"||s=="form"?i.indented+n:i.info=="switch"&&!o?i.indented+(/^(?:case|default)\b/.test(t)?n:2*n):i.align?i.column+(o?0:1):i.indented+(o?0:n)},electricChars:":{}"}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMode("xml",function(e,t){function u(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if(r=="<"){if(e.eat("!"))return e.eat("[")?e.match("CDATA[")?n(l("atom","]]>")):null:e.match("--")?n(l("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(c(1))):null;if(e.eat("?"))return e.eatWhile(/[\w\._\-]/),t.tokenize=l("meta","?>"),"meta";o=e.eat("/")?"closeTag":"openTag",e.eatSpace(),s="";var i;while(i=e.eat(/[^\s\u00a0=<>\"\'\/?]/))s+=i;return t.tokenize=a,"tag"}return r=="&"?(e.eatWhile(/[^;]/),e.eat(";"),"atom"):(e.eatWhile(/[^&<]/),null)}function a(e,t){var n=e.next();return n==">"||n=="/"&&e.eat(">")?(t.tokenize=u,o=n==">"?"endTag":"selfcloseTag","tag"):n=="="?(o="equals",null):/[\'\"]/.test(n)?(t.tokenize=f(n),t.tokenize(e,t)):(e.eatWhile(/[^\s\u00a0=<>\"\'\/?]/),"word")}function f(e){return function(t,n){while(!t.eol())if(t.next()==e){n.tokenize=a;break}return"string"}}function l(e,t){return function(n,r){while(!n.eol()){if(n.match(t)){r.tokenize=u;break}n.next()}return e}}function c(e){return function(t,n){var r;while((r=t.next())!=null){if(r=="<")return n.tokenize=c(e+1),n.tokenize(t,n);if(r==">"){if(e==1){n.tokenize=u;break}return n.tokenize=c(e-1),n.tokenize(t,n)}}return"meta"}}function d(){for(var e=arguments.length-1;e>=0;e--)h.cc.push(arguments[e])}function v(){return d.apply(null,arguments),!0}function m(e,t){var n=r.doNotIndent.hasOwnProperty(e)||h.context&&h.context.noIndent;h.context={prev:h.context,tagName:e,indent:h.indented,startOfLine:t,noIndent:n}}function g(){h.context&&(h.context=h.context.prev)}function y(e){if(e=="openTag")return h.tagName=s,v(E,b(h.startOfLine));if(e=="closeTag"){var t=!1;return h.context?t=h.context.tagName!=s:t=!0,t&&(p="error"),v(w(t))}return v()}function b(e){return function(t){return t=="selfcloseTag"||t=="endTag"&&r.autoSelfClosers.hasOwnProperty(h.tagName.toLowerCase())?v():t=="endTag"?(m(h.tagName,e),v()):v()}}function w(e){return function(t){return e&&(p="error"),t=="endTag"?(g(),v()):(p="error",v(arguments.callee))}}function E(e){return e=="word"?(p="attribute",v(E)):e=="equals"?v(S,E):e=="string"?(p="error",v(E)):d()}function S(e){return e=="word"&&r.allowUnquoted?(p="string",v()):e=="string"?v(x):d()}function x(e){return e=="string"?v(x):d()}var n=e.indentUnit,r=t.htmlMode?{autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,area:!0},doNotIndent:{pre:!0},allowUnquoted:!0}:{autoSelfClosers:{},doNotIndent:{},allowUnquoted:!1},i=t.alignCDATA,s,o,h,p;return{startState:function(){return{tokenize:u,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(e,t){e.sol()&&(t.startOfLine=!0,t.indented=e.indentation());if(e.eatSpace())return null;p=o=s=null;var n=t.tokenize(e,t);t.type=o;if((n||o)&&n!="comment"){h=t;for(;;){var r=t.cc.pop()||y;if(r(o||n))break}}return t.startOfLine=!1,p||n},indent:function(e,t,r){var s=e.context;if(e.tokenize!=a&&e.tokenize!=u||s&&s.noIndent)return r?r.match(/^(\s*)/)[0].length:0;if(i&&/<!\[CDATA\[/.test(t))return 0;s&&/^<\//.test(t)&&(s=s.prev);while(s&&!s.startOfLine)s=s.prev;return s?s.indent+n:0},compareStates:function(e,t){if(e.indented!=t.indented||e.tokenize!=t.tokenize)return!1;for(var n=e.context,r=t.context;;n=n.prev,r=r.prev){if(!n||!r)return n==r;if(n.tagName!=r.tagName)return!1}},electricChars:"/"}}),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0})